{"version":3,"sources":["script.js"],"names":[],"mappings":"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","file":"script-compiled.js","sourcesContent":["\"use strict\";\r\n\r\nclass TaskList {\r\n    constructor() {\r\n        this.userId = undefined;\r\n        this.tasks = [];\r\n        this.loginClass = undefined;\r\n    }\r\n\r\n    addTask() {\r\n        /**\r\n         * POST: json = {'user_id': 'number', taskText = 'string'}\r\n         * GET:\r\n         * if OK = true: json = {'ok': 'boolean', 'task_id': 'number'}\r\n         * if OK = false: json = {'ok': 'boolean', 'error_code': 'number' or null,\r\n         * 'error_message': 'string' or null}\r\n         */\r\n        const self = this;\r\n        if (document.getElementById(\"task_input_field\").value) {\r\n            let taskText = document.getElementById(\"task_input_field\").value;\r\n            document.getElementById(\"task_input_field\").value = \"\";\r\n            let sendData = {\"taskText\": taskText};\r\n\r\n            const add = (answer) => {\r\n                if (answer['ok'] === true) {\r\n                    let taskId = answer['task_id'];\r\n                    let newTask = new Task(self, taskId, taskText);\r\n\r\n                    self.tasks.push(newTask);\r\n\r\n                    self.updateDom();\r\n                }\r\n                if (answer[\"error_code\"] === 401) {\r\n                    this.loginClass.logOut();\r\n                    showInfoWindow(\"Authorisation problem!\");\r\n                }\r\n            }\r\n            knock_knock('save_task', add, sendData);\r\n        }\r\n    }\r\n\r\n    finishTask(node) {\r\n        /**\r\n         * POST: json = {'task_id': 'number', 'status': 'boolean'}\r\n         * GET:\r\n         * if OK = true: json = {'ok': true}\r\n         * if OK = false: json = {'ok': 'boolean', 'error_code': 'number' or null,\r\n         * 'error_message': 'string' or null}\r\n         */\r\n        const self = this;\r\n        node.status = node.status === false;\r\n        let sendData = {\"taskId\": node.id, \"status\": node.status};\r\n\r\n        const finish = (answer) => {\r\n            if (answer['ok'] === true) {\r\n                self.updateDom();\r\n            }\r\n            if (answer[\"error_code\"] === 401) {\r\n                this.loginClass.logOut();\r\n                showInfoWindow(\"Authorisation problem!\");\r\n            }\r\n        }\r\n        knock_knock('finish_task', finish, sendData);\r\n    }\r\n\r\n    removeTask(node) {\r\n        /**\r\n         * POST: {taskId: 'number'}\r\n         * GET:\r\n         * if OK = true: json = {'ok': true}\r\n         * if OK = false: json = {'ok': 'boolean', 'error_code': 'number' or null,\r\n         * 'error_message': 'string' or null}\r\n         */\r\n        const self = this;\r\n        let sendData = {'taskId': node.id}\r\n\r\n        const remove = (answer) => {\r\n            if (answer['ok'] === true) {\r\n                self.tasks.splice(self.tasks.indexOf(node), 1);\r\n                self.updateDom();\r\n            }\r\n            if (answer[\"error_code\"] === 401) {\r\n                this.loginClass.logOut();\r\n                showInfoWindow(\"Authorisation problem!\");\r\n            }\r\n        }\r\n        knock_knock('delete_task', remove, sendData);\r\n    }\r\n\r\n    updateDom(tasksParentId = 'main_tasks', existsTasksClass = 'task') {\r\n        let tasksParent = document.getElementById(tasksParentId);\r\n        let existTasks = document.getElementsByClassName(existsTasksClass);\r\n        let i = 0;\r\n\r\n        for (i; i < this.tasks.length; i++) {\r\n            if (existTasks[i]) {\r\n                this.tasks[i].replaceTaskNode(existTasks[i]);\r\n            } else {\r\n                tasksParent.appendChild(this.tasks[i].createTaskNode());\r\n            }\r\n        }\r\n        if (existTasks[i]) {\r\n            // for (i; i < existTasks.length; i++) {\r\n            //     existTasks[i].remove();\r\n            //     i--;\r\n            // }\r\n            tasksParent.removeChild(tasksParent.lastChild);\r\n        }\r\n    }\r\n}\r\n\r\n\r\nclass Task {\r\n    constructor(taskList, id, text, status = false) {\r\n        this.taskList = taskList;\r\n        this.id = id;\r\n        this.text = text;\r\n        this.status = status;\r\n    }\r\n\r\n    createTaskNode() {\r\n        const node = this;\r\n        let taskDiv = document.createElement(\"div\");\r\n        taskDiv.setAttribute(\"class\", \"task\");\r\n        let finishButton = document.createElement(\"input\");\r\n        finishButton.setAttribute(\"type\", \"button\");\r\n        finishButton.setAttribute(\"class\", \"task_finish_button\");\r\n\r\n        if (this.status === false) {\r\n            finishButton.setAttribute(\"value\", \"Выполнено\");\r\n        } else {\r\n            finishButton.setAttribute(\"value\", \"Не выполнено\");\r\n            taskDiv.setAttribute(\"class\", \"task finished_task\");\r\n        }\r\n        finishButton.onclick = function () {\r\n            node.taskList.finishTask(node);\r\n        };\r\n\r\n        let removeButton = document.createElement(\"input\");\r\n\r\n        removeButton.setAttribute(\"type\", \"button\");\r\n        removeButton.setAttribute(\"value\", \"X\");\r\n        removeButton.setAttribute(\"class\", \"task_remove_button\");\r\n        removeButton.onclick = function () {\r\n            node.taskList.removeTask(node);\r\n        };\r\n\r\n        let par = document.createElement(\"p\");\r\n\r\n        par.appendChild(document.createTextNode(this.text));\r\n        par.setAttribute(\"class\", \"paragraph\");\r\n        taskDiv.appendChild(finishButton);\r\n        taskDiv.appendChild(par);\r\n        taskDiv.appendChild(removeButton);\r\n\r\n        return taskDiv;\r\n    }\r\n\r\n    replaceTaskNode(existTask) {\r\n        const node = this;\r\n        let finishButton = existTask.getElementsByClassName(\"task_finish_button\")[0];\r\n        let removeButton = existTask.getElementsByClassName(\"task_remove_button\")[0];\r\n        existTask.getElementsByTagName(\"p\")[0].textContent = this.text;\r\n        if (this.status === false) {\r\n            finishButton.setAttribute(\"value\", \"Выполнено\");\r\n            existTask.setAttribute(\"class\", \"task\");\r\n        } else {\r\n            finishButton.setAttribute(\"value\", \"Не выполнено\");\r\n            existTask.setAttribute(\"class\", \"task finished_task\");\r\n        }\r\n        finishButton.onclick = function () {\r\n            node.taskList.finishTask(node);\r\n        };\r\n        removeButton.onclick = function () {\r\n            node.taskList.removeTask(node);\r\n        };\r\n    }\r\n}\r\n\r\n\r\nclass Login {\r\n    constructor() {\r\n        const self = this;\r\n        this.taskList = undefined;\r\n        this.authMenu = document.getElementById(\"auth_menu\");\r\n        this.loginWindow = document.getElementById(\"login_window\");\r\n        this.loginWindowInfo = document.getElementById(\"login_window_info\");\r\n        this.loginFormUsername = document.getElementById(\"login_form_username\");\r\n        this.loginFormPassword = document.getElementById(\"login_form_password\");\r\n        this.loginButton = document.getElementById(\"login_form_button\");\r\n        this.registerWindow = document.getElementById(\"register_window\");\r\n        this.registerWindowInfo = document.getElementById(\"register_window_info\");\r\n        this.registerFormUsername = document.getElementById(\"register_form_username\");\r\n        this.registerFormPassword = document.getElementById(\"register_form_password\");\r\n        this.registerFormPasswordConfirm = document.getElementById(\"register_form_password_confirm\");\r\n        this.userRegisterButton = document.getElementById(\"register_form_button\");\r\n        this.switchRegisterButton = document.getElementById(\"register_button\");\r\n        this.switchLoginButton = document.getElementById(\"login_button\");\r\n        this.userNameField = document.getElementById(\"user_name_field\");\r\n        this.userLogOutButton = document.getElementById('user_logout_button');\r\n        this.userDeleteButton = document.getElementById(\"user_delete_button\");\r\n        this.shadow = document.getElementById(\"shadow\");\r\n        \r\n        this.loginFormUsername.focus();\r\n        this.userLogOutButton.disabled = true;\r\n\r\n        this.switchRegisterButton.onclick = function() {\r\n            self.switchLogin(this.value);\r\n        }\r\n        this.switchLoginButton.onclick = function() {\r\n            self.switchLogin(this.value);\r\n        }\r\n        this.loginButton.onclick = function() {\r\n            self.logIn();\r\n        }\r\n        this.userLogOutButton.onclick = function() {\r\n            self.logOut();\r\n        }\r\n        this.userDeleteButton.onclick = function() {\r\n            self.userDelete();\r\n        }\r\n        this.userRegisterButton.onclick = function() {\r\n            self.userRegister();\r\n        }\r\n    }\r\n\r\n\r\n    switchLogin(val) {\r\n        if (val === 'register') {\r\n            windowChange(this.registerWindow, this.switchLoginButton, this.loginWindow, this.switchRegisterButton, this.registerFormUsername, this.loginWindowInfo);\r\n        } else if (val === 'login') {\r\n            windowChange(this.loginWindow, this.switchRegisterButton, this.registerWindow, this.switchLoginButton, this.loginFormUsername, this.registerWindowInfo);\r\n        }\r\n\r\n        function windowChange(activate, activateButton, deactivate, deactivateButton, focusField, infoField) {\r\n            removeChilds(infoField);\r\n            deactivate.style.opacity = '0';\r\n            deactivateButton.disabled = true;\r\n            activate.style.display = 'block';\r\n            focusField.focus();\r\n            setTimeout(function () {\r\n                activate.style.opacity = '1';\r\n            });\r\n            setTimeout(function () {\r\n                deactivate.style.display = 'none';\r\n                activateButton.disabled = false;\r\n            }, 500);\r\n        }\r\n    }\r\n\r\n\r\n    hideLoginWindow() {\r\n        this.loginFormUsername.value = \"\";\r\n        removeChilds(this.loginWindowInfo);\r\n        this.authMenu.style.opacity = '0';\r\n        this.shadow.style.display = \"none\";\r\n\r\n        setTimeout(() => {\r\n            this.authMenu.style.display = 'none';\r\n            document.getElementById('task_input_field').focus();\r\n        }, 500);\r\n    }\r\n\r\n\r\n    showLoginWindow() {\r\n        this.shadow.style.display = \"block\";\r\n        removeChilds(this.userNameField);\r\n        this.userLogOutButton.disabled = true;\r\n        this.authMenu.style.display = 'block';\r\n        this.loginFormUsername.focus();\r\n        setTimeout(() => {\r\n            this.authMenu.style.opacity = '1';\r\n        });\r\n    }\r\n\r\n\r\n    onLoad() {\r\n        /**\r\n         * POST:\r\n         * GET:\r\n         * if OK = true: json = {'ok': 'boolean', 'user_id': 'number', 'tasks': [\r\n         *                                          {\"task_id\": \"number\", 'task_text': 'string', 'status': 'string'},\r\n         *                                          ...\r\n         *                                          ]\r\n         *             }\r\n         * if OK = false: json = {'ok': 'boolean', 'error_code': 'number' or null,\r\n         * 'error_message': 'string' or null}\r\n         */\r\n        const loadTasks = (answer) => {\r\n            if (answer['ok'] === true) {\r\n                let userId = answer['user_id'];\r\n                let userName = answer[\"user_name\"];\r\n                let tasksFromServer = answer['tasks'];\r\n\r\n                if (!this.userNameField.firstChild) {\r\n                    this.userNameField.appendChild(document.createTextNode(userName));\r\n                    this.userLogOutButton.disabled = false;\r\n                }\r\n\r\n                this.taskList = new TaskList();\r\n                this.taskList.loginClass = this;\r\n                let taskInputButton = document.getElementById(\"task_input_button\");\r\n\r\n                taskInputButton.onclick = () => {\r\n                    this.taskList.addTask();\r\n                }\r\n\r\n                this.taskList.userId = userId;\r\n                for (let task of tasksFromServer) {\r\n                    this.taskList.tasks.push(new Task(this.taskList, task[\"task_id\"], task[\"task_text\"], task[\"status\"]));\r\n                }\r\n                this.taskList.updateDom();\r\n\r\n            }\r\n            if (answer[\"error_code\"] === 401) {\r\n                this.logOut();\r\n                showInfoWindow(\"Authorisation problem!\");\r\n            }\r\n        }\r\n        knock_knock('load_tasks', loadTasks);\r\n    }\r\n\r\n    logIn() {\r\n        /**\r\n         * POST: json = {\"userName\": \"string\", \"password\": \"string\"}\r\n         * GET:\r\n         * if OK = true: json = {\"ok\": \"boolean\", \"user_id\": \"number\",\r\n         *                         \"tasks\": [{\"task_id\": \"number\", \"task_text\": \"string\", \"status\": \"boolean\"},\r\n         *                                  ..........] }\r\n         * if OK = false: json = {'ok': 'boolean', 'error_code': 'number' or null,\r\n         *                        'error_message': 'string' or null}\r\n         */\r\n\r\n        removeChilds(this.loginWindowInfo);\r\n        if (this.loginFormUsername.value) {\r\n            if (this.loginFormPassword.value) {\r\n                let userName = this.loginFormUsername.value;\r\n                let password = this.loginFormPassword.value;\r\n                const sendData = {\"userName\": userName, \"password\": password};\r\n\r\n                this.loginFormPassword.value = \"\";\r\n\r\n                const login = (answer) => {\r\n                    if (answer[\"ok\"] === true) {\r\n                        let userName = answer[\"user_name\"];\r\n\r\n                        this.userNameField.appendChild(document.createTextNode(userName));\r\n                        this.userLogOutButton.disabled = false;\r\n\r\n                        this.hideLoginWindow();\r\n\r\n                        this.onLoad()\r\n                        startLoadingWindow();\r\n                    } else {\r\n                        this.loginWindowInfo.appendChild(document.createTextNode(answer[\"error_message\"]));\r\n                    }\r\n                }\r\n                knock_knock('user_login', login, sendData);\r\n            } else {\r\n                this.loginWindowInfo.appendChild(document.createTextNode(\"Enter password!\"));\r\n            }\r\n        } else {\r\n            this.loginWindowInfo.appendChild(document.createTextNode('Please, enter user name!'));\r\n        }\r\n    }\r\n\r\n    logOut() {\r\n        this.taskList = undefined;\r\n        document.cookie = \"id=; expires=-1\";\r\n        document.cookie = \"sign=; expires=-1\";\r\n\r\n        let tasksParent = document.getElementById(\"main_tasks\");\r\n        removeChilds(tasksParent);\r\n\r\n        this.showLoginWindow();\r\n\r\n    }\r\n\r\n    userDelete() {\r\n        const confirm = function() {\r\n            knock_knock(\"user_delete\", del);\r\n        }\r\n\r\n        const del = (answer) => {\r\n            if (answer[\"ok\"] === true) {\r\n                this.logOut();\r\n            }\r\n            if (answer[\"error_code\"] === 401) {\r\n                this.logOut();\r\n                showInfoWindow(\"Authorisation problem!\");\r\n            }\r\n        }\r\n\r\n        showConfirmWindow(confirm, \"Are you sure, you want to delete user?\");\r\n    }\r\n\r\n    userRegister() {\r\n        // TODO: Слишком большая вложенность, нужно попробовать переписать метод через конструкцию SWITCH\r\n    /**\r\n     * POST: json =  {\"newUserName\": \"string\",  \"password\": \"string\"}\r\n     * GET: answer = json = {'ok': 'boolean', 'error_code': 'number' or null,\r\n     'error_message': 'string' or null}\r\n     */\r\n        removeChilds(this.registerWindowInfo);\r\n        if (this.registerFormUsername.value) {\r\n            if (this.registerFormPassword.value) {\r\n                if (this.registerFormPasswordConfirm.value) {\r\n                    let newUserName = this.registerFormUsername.value;\r\n                    let password = this.registerFormPassword.value;\r\n                    let passwordConform = this.registerFormPasswordConfirm.value;\r\n\r\n                    if (password === passwordConform) {\r\n                        const sendData = {\"newUserName\": newUserName, \"password\": password};\r\n        \r\n                        const register = (answer) => {\r\n                            if (answer['ok'] === true) {\r\n                                this.registerFormUsername.value = \"\";\r\n                                this.registerFormPassword.value = \"\";\r\n                                this.registerFormPasswordConfirm.value = \"\";\r\n                                this.registerWindowInfo.appendChild(document.createTextNode(\"New user \" + newUserName + \" successfully created!\"));\r\n                            } else if (answer['error_code'] === 1062) {\r\n                                this.registerWindowInfo.appendChild(document.createTextNode(\"Name \" + newUserName + \" is already used!\"));\r\n                            } else {\r\n                                this.registerWindowInfo.appendChild(document.createTextNode(answer['error_message'] + ' Код ошибки: ' + answer['error_code']));\r\n                            }\r\n                        }\r\n                        knock_knock('user_register', register, sendData);\r\n                    } else {\r\n                        this.registerWindowInfo.appendChild(document.createTextNode(\"Passwords are not match!\"));\r\n                    }\r\n                } else {\r\n                    this.registerWindowInfo.appendChild(document.createTextNode(\"Please, confirm password!\"));\r\n                }\r\n            } else {\r\n                this.registerWindowInfo.appendChild(document.createTextNode(\"Please, enter new password!\"))\r\n            }\r\n        } else {\r\n            this.registerWindowInfo.appendChild(document.createTextNode(\"Please, enter new user name!\"));\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction events() {\r\n    function noEnterRefreshTaskInput(event) {\r\n        if (event.keyCode === 13) {\r\n            event.preventDefault();\r\n            document.getElementById(\"task_input_button\").click();\r\n        }\r\n    }\r\n    \r\n    function noEnterRefreshLogin(event) {\r\n        if (event.keyCode === 13) {\r\n            event.preventDefault();\r\n            document.getElementById(\"login_form_button\").click();\r\n        }\r\n    }\r\n\r\n    function noEnterRefreshRegister(event) {\r\n        if (event.keyCode === 13) {\r\n            event.preventDefault();\r\n            document.getElementById(\"register_form_button\").click();\r\n        }\r\n    }\r\n\r\n    let loginForm = document.forms.login_form;\r\n    loginForm.addEventListener(\"keydown\", noEnterRefreshLogin, false);\r\n\r\n    let registerForm = document.forms.register_form;\r\n    registerForm.addEventListener(\"keydown\", noEnterRefreshRegister, false);\r\n\r\n    let taskInputField = document.getElementById(\"task_input_field\");\r\n    taskInputField.addEventListener(\"keydown\", noEnterRefreshTaskInput, false);\r\n}\r\n\r\nfunction knock_knock(path, func, sendData = undefined) {\r\n    if (window.fetch) {\r\n        let init = {method: 'POST',\r\n                    headers: {'Content-Type': 'application/json; charset=utf-8'},\r\n                    body: JSON.stringify(sendData)}\r\n\r\n        fetch('http://127.0.0.1:5000/' + path, init)\r\n            .then((answer) => {\r\n                if (answer.ok && answer.headers.get('Content-Type') === 'application/json') {\r\n                    return answer.json();\r\n                }\r\n            })\r\n            .then((answer) => {\r\n                func(answer);\r\n            })\r\n    } else {\r\n        let req = new XMLHttpRequest();\r\n        req.open('POST', 'http://127.0.0.1:5000/' + path);\r\n        req.setRequestHeader('Content-type', 'application/json; charset=utf-8');\r\n        req.send(JSON.stringify(sendData));\r\n\r\n        req.onreadystatechange = function () {\r\n            if (req.readyState === 4) {\r\n                if (req.status === 200 && req.getResponseHeader('Content-type') === 'application/json') {\r\n                        func(JSON.parse(req.responseText));\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// function createNewTaskList(userId, tasksFromServer, taskInputButtonId, taskParentId, existsTasksClass, loginClass) {\r\n//     let taskList = new TaskList(loginClass);\r\n//     let taskInputButton = document.getElementById(taskInputButtonId);\r\n\r\n//     taskInputButton.onclick = function() {\r\n//         taskList.addTask();\r\n//     }\r\n\r\n//     taskList.userId = userId;\r\n//     for (let task of tasksFromServer) {\r\n//         taskList.tasks.push(new Task(taskList, task[\"task_id\"], task[\"task_text\"], task[\"status\"]));\r\n//     }\r\n//     taskList.updateDom(taskParentId, existsTasksClass);\r\n// }\r\n\r\nfunction showConfirmWindow(func, message) {\r\n    let shadow = document.getElementById(\"shadow\");\r\n    let confirmWindow = document.getElementById(\"confirm_window\");\r\n    let confirmWindowMessage = document.getElementById(\"confirm_window_message\");\r\n    let okButton = document.getElementById(\"confirm_window_ok_button\");\r\n    let cancelButton = document.getElementById(\"confirm_window_cancel_button\");\r\n\r\n    shadow.style.display = \"block\";\r\n    confirmWindowMessage.appendChild(document.createTextNode(message));\r\n    confirmWindow.style.display = \"block\";\r\n\r\n    setTimeout(function() {\r\n        shadow.style.opacity = \"0.5\";\r\n    })\r\n\r\n    okButton.onclick = click;\r\n    cancelButton.onclick = click;\r\n\r\n    function click() {\r\n        if (this.value === \"OK\") {\r\n            func();\r\n        }\r\n        shadow.style.display = \"none\";\r\n        confirmWindow.style.display = \"none\";\r\n        confirmWindowMessage.removeChild(confirmWindowMessage.firstChild);\r\n    }\r\n}\r\n\r\nfunction showInfoWindow(message) {\r\n    let infoWindow = document.getElementById(\"info_window\");\r\n    let infoWindowMessage = document.getElementById(\"info_window_message\");\r\n\r\n    infoWindowMessage.appendChild(document.createTextNode(message));\r\n    infoWindow.style.display = \"block\";\r\n\r\n    setTimeout(function() {\r\n        infoWindow.style.display = \"none\";\r\n    }, 3000)\r\n}\r\n\r\nfunction startLoadingWindow() {\r\n    let loadingWindow = document.getElementById(\"loading_window\");\r\n    let loadingWindowMessage = document.getElementById(\"loading_window_message\");\r\n\r\n    loadingWindow.style.display = \"block\";\r\n\r\n    setTimeout(function() {\r\n        loadingWindow.style.display = \"none\";\r\n    }, 3000);\r\n}\r\n\r\nfunction removeChilds(field) {\r\n    while (field.firstChild) {\r\n        field.removeChild(field.firstChild);\r\n    }\r\n}\r\n\r\nfunction authCheck(mainLogin) {\r\n    const check = (answer) => {\r\n        if (answer[\"ok\"] === true) {\r\n            mainLogin.hideLoginWindow();\r\n            mainLogin.onLoad();\r\n        }\r\n    }\r\n    knock_knock(\"/auth_check\", check);\r\n}\r\n\r\nfunction getCookie(name) {\r\n    let matches = document.cookie.match(new RegExp(\r\n      \"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\r\n    ));\r\n    return matches ? decodeURIComponent(matches[1]) : undefined;\r\n  }\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    let mainLogin = new Login();\r\n    authCheck(mainLogin);\r\n    events();\r\n});"]}